srl:
  _features:
    auto_itf_desc: no # generate itf-desription from LLDP state
  system:
    lldp:
      admin-state: enable
    information:
      location: "Somewhere"
      contact: "John Doe"
  routing_policy:
    prefix_set:
      servers:
        prefix:
          - ip-prefix: 10.0.0.0/8
            mask-length-range: "24..32"
    policy:
      export-loopbacks:
        default-action:
          policy-result: reject
        statement:
          - name: "1"
            match:
              prefix-set: loopbacks
            action:
              policy-result: accept
      lo-and-servers:
        default-action:
          policy-result: reject
        statement:
          - name: "10"
            match:
              prefix-set: loopbacks
            action:
              policy-result: accept
          - name: "20"
            match:
              prefix-set: servers
            action:
              policy-result: accept
      pass-all:
        default-action:
          policy-result: accept
        statement:
          - name: "1"
            match:
              protocol: bgp
            action:
              policy-result: accept
      pass-evpn:
        default-action:
          policy-result: accept
        statement:
          - name: "1"
            match:
              protocol: bgp-evpn
            action:
              policy-result: accept

leaf:
  network_instance:
    default:
      protocols:
        bgp:
          group:
            overlay:
              export_policy: pass-evpn
              import_policy: pass-evpn
            spines:
              export_policy: lo-and-servers
              import_policy: pass-all

spine:
  network_instance:
    default:
      protocols:
        bgp:
          group:
            overlay:
              export_policy: pass-evpn
              import_policy: pass-evpn
            leafs:
              export_policy: pass-all
              import_policy: pass-all
            dcgws:
              export_policy: pass-all
              import_policy: pass-all

sros:
  system:
    mtu:
      default-port-mtu: 9412
  routing_policy:
    prefix_set:
      #loopbacks:
      #  prefix:
      #    - ip-prefix: 192.168.255.0/24
      #      mask-length-range: "32..32"
      default:
        prefix:
          - ip-prefix: 0.0.0.0/0
    policy:
      export-to-underlay:
        default-action:
          policy-result: reject
        statement:
          - name: "10"
            match:
              prefix-set: default
            action:
              policy-result: reject
          - name: "20"
            match:
              prefix-set: loopbacks
              protocol: direct
            action:
              policy-result: accept

